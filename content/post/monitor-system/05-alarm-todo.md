---
title: "监控系统系列：（四）前端展示"
date: 2018-06-02T17:51:02+08:00
lastmod: 2018-06-02T17:51:02+08:00
draft: true
tags: ["monitor"]
categories: ["monitor-system"]
author: "weiweimilk"
autoCollapseToc: true
---



## 背景

一般来说，报警规则都是周期性触发的。因此需要有一个“类Cron Job”的调度器。这类调度系统的HA设计可以参考“Azkaban” 和 “Quartz”。
* Azkaban：https://azkaban.github.io/
* Quartz：http://www.quartz-scheduler.org/


在我观察了一系列的监控报警产品后，规约出大致有两种“报警规则”的定义实现方式，一种是基于“规则表达式的”，另一种是基于直接“脚本&编程”的：


难点：
如何对海量告警进行去重、合并、相关性收敛，做到不误告警，不漏告警，还不能多告警，并具备高可用、易扩容、易扩展特点
1) 屏蔽：日常运营中不可避免需要对某些可预知的告警进行屏蔽。
2) 去重：当一个告警通知负责人后，在这个告警恢复之前，负责人不会希望继续收到相同的告警。
3) 抑制：为了减少由于系统抖动带来的骚扰，还需要实现抑制，例如服务器瞬间高负载，可能是正常的，我们可以不关注，只有持续一段时间的高负载才需要重视。
4) 恢复：运营人员不仅需要知道告警的产生，还需要知道告警什么时候恢复。
5) 合并：有时需要对同一时刻产生的多条告警进行合并，例如某个服务器同一时刻出现多个不同进程的告警，需要把这多个进程告警合并成为一条进程告警。
6) 相关性收敛：有时某个告警产生时，往往会伴随着其它告警。例如某个服务端进程不存在而产生进程告警时，会伴随着一些端口告警，对于一个智能的告警系统，应该只需要通知进程告警，而剩下的端口告警则会被收敛，作为该进程告警的子告警。当某个机架所有服务器都Ping不可达时，应该只需要发出一个机架掉电告警，机架上服务器的Ping不可达告警作为该机架掉电告警的子告警。
